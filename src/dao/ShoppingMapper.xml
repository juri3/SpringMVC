<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="mybatis.dao.ShoppingMapper">
	<cache />
	<select id="getIngredient" parameterType="int" resultType="Rcp">
		SELECT
			*
		FROM Rcp
		WHERE rcpnum = #{rcpNum}
	</select>
	
	<insert id="insertCart"	parameterType="Cart">
		INSERT INTO cart VALUES(#{cartNum}, #{memNum}, #{productName}, #{qty}, #{price})
	</insert>
	
	<select id="getCart" parameterType="int" resultType="Cart">
		SELECT
			*
		FROM Cart
		WHERE memNum = #{memNum}
	</select>
	
	<select id="getCartintoJjim" parameterType="int" resultType="Cart">
		SELECT
			*
		FROM Cart
		WHERE cartNum = #{cartNum}
	</select>
	
	<insert id="insertjjim"	parameterType="Jjim">
		INSERT INTO jjim VALUES(#{jjimNum}, #{memNum}, #{productName}, #{price})
	</insert>
	
	<delete id="deleteCartvalue" parameterType="int">
		DELETE FROM cart
		WHERE cartNum = #{cartNum}
	</delete>
	
	<select id="getSale" parameterType="int" resultType="Sale">
		SELECT
			*
		FROM sale
		WHERE rcpNum = #{rcpNum}
	</select>
	
	<select id="insert_maxCart" resultType="int">
		SELECT
			nvl(max(cartNum)+1,0) 
		FROM Cart
	</select>
	<select id="insert_maxJjim" resultType="int">
		SELECT
			nvl(max(cartNum)+1,0) 
		FROM Jjim
	</select>
	<select id="insert_maxOP" resultType="int">
		SELECT
			max(productNum)+1 
		FROM order_product
	</select>
	<select id="insert_maxMA" resultType="int">
		SELECT
			max(addressNum)+1 
		FROM mem_address
	</select>
	
</mapper>	